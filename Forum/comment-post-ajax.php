<?php
require 'function.php';
$post_id = 1;
$user_id = 1;
$db = mysqli_connect('localhost', 'root', '', 'forum');
// Todo if user post a comment
if (isset($_POST['comment_post_text']) && $_POST["comment_post_text"] != '') {
    $body = $_POST['comment_post_text'];
    $sqlinsert = "INSERT INTO `comment`(`post_id`, `user_id`, `body`) VALUES (" . $post_id . "," . $user_id . ",'" . $body . "')";
    $result = mysqli_query($db, $sqlinsert);
    $inserted_id = $db->insert_id;
    $res = mysqli_query($db, "SELECT * FROM comment WHERE comment_id=$inserted_id");
    $inserted_comment = mysqli_fetch_assoc($res);
    if ($result) {
        $comment = "
<div class=\"comment\" data-comment-id=\" ".$inserted_comment['comment_id']."\">
    <div class=\"comment-details\">
        <div class=\"comment-profile\">
            <div class=\"comment-profile-img\">
                <img src=\"1374076.jpg\"/>
            </div>
            <a href=\"profilelink\">username</a>
        </div>
        <div>
            <div class=\"comment-body\">
             ".$inserted_comment['body'] ."  
             </div>
            <div class=\"likes-container\">
                <div class=\"like\">
                    <svg
                            xmlns=\"http://www.w3.org/2000/svg\"
                            width=\"24\"
                            height=\"24\"
                            viewBox=\"0 0 24 24\"
                    >
                        <path
                                d=\"M19.406 14.442c1.426-.06 2.594-.858 2.594-2.506 0-1-.986-6.373-1.486-8.25-.714-2.689-2.471-3.686-5.009-3.686-2.283 0-4.079.617-5.336 1.158-2.585 1.113-4.665 1.842-8.169 1.842v9.928c3.086.401 6.43.956 8.4 7.744.483 1.66.972 3.328 2.833 3.328 3.448 0 3.005-5.531 2.196-8.814 1.107-.466 2.767-.692 3.977-.744zm-.207-1.992c-2.749.154-5.06 1.013-6.12 1.556.431 1.747.921 3.462.921 5.533 0 2.505-.781 3.666-1.679.574-1.993-6.859-5.057-8.364-8.321-9.113v-6c2.521-.072 4.72-1.041 6.959-2.005 1.731-.745 4.849-1.495 6.416-.614 1.295.836 1.114 1.734.292 1.661l-.771-.032c-.815-.094-.92 1.068-.109 1.141 0 0 1.321.062 1.745.115.976.123 1.028 1.607-.04 1.551-.457-.024-1.143-.041-1.143-.041-.797-.031-.875 1.078-.141 1.172 0 0 .714.005 1.761.099s1.078 1.609-.004 1.563c-.868-.037-1.069-.027-1.069-.027-.75.005-.874 1.028-.141 1.115l1.394.167c1.075.13 1.105 1.526.05 1.585z\"
                        />
                    </svg>
                    <span>0</span>
                </div>
                <div class=\"dislike\" data-id=\"commentid\">
                    <svg
                            xmlns=\"http://www.w3.org/2000/svg\"
                            width=\"24\"
                            height=\"24\"
                            viewBox=\"0 0 24 24\"
                    >
                        <path
                                d=\"M19.406 14.442c1.426-.06 2.594-.858 2.594-2.506 0-1-.986-6.373-1.486-8.25-.714-2.689-2.471-3.686-5.009-3.686-2.283 0-4.079.617-5.336 1.158-2.585 1.113-4.665 1.842-8.169 1.842v9.928c3.086.401 6.43.956 8.4 7.744.483 1.66.972 3.328 2.833 3.328 3.448 0 3.005-5.531 2.196-8.814 1.107-.466 2.767-.692 3.977-.744zm-.207-1.992c-2.749.154-5.06 1.013-6.12 1.556.431 1.747.921 3.462.921 5.533 0 2.505-.781 3.666-1.679.574-1.993-6.859-5.057-8.364-8.321-9.113v-6c2.521-.072 4.72-1.041 6.959-2.005 1.731-.745 4.849-1.495 6.416-.614 1.295.836 1.114 1.734.292 1.661l-.771-.032c-.815-.094-.92 1.068-.109 1.141 0 0 1.321.062 1.745.115.976.123 1.028 1.607-.04 1.551-.457-.024-1.143-.041-1.143-.041-.797-.031-.875 1.078-.141 1.172 0 0 .714.005 1.761.099s1.078 1.609-.004 1.563c-.868-.037-1.069-.027-1.069-.027-.75.005-.874 1.028-.141 1.115l1.394.167c1.075.13 1.105 1.526.05 1.585z\"
                        />
                    </svg>
                    <span>0</span>
                </div>
                                            <div class='reply-count' data-comment-id =\" ".$inserted_comment['comment_id']."\">
                                Replys : <span> ".count_replys($inserted_comment['comment_id'])."</span>
                            </div>
            </div>
        </div>
    </div>


</div>
";

        echo $comment;
    } else {
        echo 'error';
        exit();
    }
}
?>

<!---->
<!--<div class="comment">-->
<!--    <div class="comment-details">-->
<!--        <div class="comment-profile">-->
<!--            <div class="comment-profile-img">-->
<!--                <img src="87082093_1021419601590800_8042974475404181504_o.jpg"/>-->
<!--            </div>-->
<!--            <a href="profilelink">username</a>-->
<!--        </div>-->
<!--        <div>-->
<!--            <div class="comment-body">-->
<!--                comment-bodycomment-bodycomment-body comment-body comment-body-->
<!--                comment-body comment-body comment-bodycomment-body-->
<!--            </div>-->
<!--            <div class="likes-container">-->
<!--                <div class="like likes" data-id="commentid">-->
<!--                    <svg-->
<!--                            xmlns="http://www.w3.org/2000/svg"-->
<!--                            width="24"-->
<!--                            height="24"-->
<!--                            viewBox="0 0 24 24"-->
<!--                    >-->
<!--                        <path-->
<!--                                d="M19.406 14.442c1.426-.06 2.594-.858 2.594-2.506 0-1-.986-6.373-1.486-8.25-.714-2.689-2.471-3.686-5.009-3.686-2.283 0-4.079.617-5.336 1.158-2.585 1.113-4.665 1.842-8.169 1.842v9.928c3.086.401 6.43.956 8.4 7.744.483 1.66.972 3.328 2.833 3.328 3.448 0 3.005-5.531 2.196-8.814 1.107-.466 2.767-.692 3.977-.744zm-.207-1.992c-2.749.154-5.06 1.013-6.12 1.556.431 1.747.921 3.462.921 5.533 0 2.505-.781 3.666-1.679.574-1.993-6.859-5.057-8.364-8.321-9.113v-6c2.521-.072 4.72-1.041 6.959-2.005 1.731-.745 4.849-1.495 6.416-.614 1.295.836 1.114 1.734.292 1.661l-.771-.032c-.815-.094-.92 1.068-.109 1.141 0 0 1.321.062 1.745.115.976.123 1.028 1.607-.04 1.551-.457-.024-1.143-.041-1.143-.041-.797-.031-.875 1.078-.141 1.172 0 0 .714.005 1.761.099s1.078 1.609-.004 1.563c-.868-.037-1.069-.027-1.069-.027-.75.005-.874 1.028-.141 1.115l1.394.167c1.075.13 1.105 1.526.05 1.585z"-->
<!--                        />-->
<!--                    </svg>-->
<!--                    <span>1000</span>-->
<!--                </div>-->
<!--                <div class="dislike" data-id="commentid">-->
<!--                    <svg-->
<!--                            xmlns="http://www.w3.org/2000/svg"-->
<!--                            width="24"-->
<!--                            height="24"-->
<!--                            viewBox="0 0 24 24"-->
<!--                    >-->
<!--                        <path-->
<!--                                d="M19.406 14.442c1.426-.06 2.594-.858 2.594-2.506 0-1-.986-6.373-1.486-8.25-.714-2.689-2.471-3.686-5.009-3.686-2.283 0-4.079.617-5.336 1.158-2.585 1.113-4.665 1.842-8.169 1.842v9.928c3.086.401 6.43.956 8.4 7.744.483 1.66.972 3.328 2.833 3.328 3.448 0 3.005-5.531 2.196-8.814 1.107-.466 2.767-.692 3.977-.744zm-.207-1.992c-2.749.154-5.06 1.013-6.12 1.556.431 1.747.921 3.462.921 5.533 0 2.505-.781 3.666-1.679.574-1.993-6.859-5.057-8.364-8.321-9.113v-6c2.521-.072 4.72-1.041 6.959-2.005 1.731-.745 4.849-1.495 6.416-.614 1.295.836 1.114 1.734.292 1.661l-.771-.032c-.815-.094-.92 1.068-.109 1.141 0 0 1.321.062 1.745.115.976.123 1.028 1.607-.04 1.551-.457-.024-1.143-.041-1.143-.041-.797-.031-.875 1.078-.141 1.172 0 0 .714.005 1.761.099s1.078 1.609-.004 1.563c-.868-.037-1.069-.027-1.069-.027-.75.005-.874 1.028-.141 1.115l1.394.167c1.075.13 1.105 1.526.05 1.585z"-->
<!--                        />-->
<!--                    </svg>-->
<!--                    <span>1000</span>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--    <div class="replays-wrapper">-->
<!--    </div>-->
<!--</div>-->
